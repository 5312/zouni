(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/site"],{2213:function(t,n,i){"use strict";var o,s=function(){var t=this,n=t.$createElement,i=(t._self._c,t.__map(t.cardList,(function(n,i){var o=t.$tool.distanceHanlde(n.goods_distance);return{$orig:t.__get_orig(n),g0:o}})));t.$mp.data=Object.assign({},{$root:{l0:i}})},e=[];i.d(n,"b",(function(){return s})),i.d(n,"c",(function(){return e})),i.d(n,"a",(function(){return o}))},"7a37":function(t,n,i){"use strict";(function(t){i("29e1");o(i("66fd"));var n=o(i("8fd1"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("543d")["createPage"])},"82cf":function(t,n,i){},"8fd1":function(t,n,i){"use strict";i.r(n);var o=i("2213"),s=i("b718");for(var e in s)"default"!==e&&function(t){i.d(n,t,(function(){return s[t]}))}(e);i("faf3");var a,u=i("f0c5"),c=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,"3e75afbf",null,!1,o["a"],a);n["default"]=c.exports},b718:function(t,n,i){"use strict";i.r(n);var o=i("bfb3"),s=i.n(o);for(var e in o)"default"!==e&&function(t){i.d(n,t,(function(){return o[t]}))}(e);n["default"]=s.a},bfb3:function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={data:function(){return{page:1,total:0,category_id:1,cardList:[],isPullDown:!1,addressInfo:null,coupon_id:null}},onLoad:function(t){this.coupon_id=t.coupon_id||null,this.page=1,this.isPullDown=!0,this.init()},onPullDownRefresh:function(){this.page=1,this.isPullDown=!0,this.init()},onReachBottom:function(){console.log("触底了"),this.isPullDown=!1,this.total>this.cardList.length&&(this.page+=1,this.init())},methods:{init:function(){this.addressInfo=this.$tool.uniGetStorage("addressInfo"),this.addressInfo.category_id||this.coupon_id?this.getListInfo(this.addressInfo.category_id):this.getNewListInfo(this.addressInfo.lat,this.addressInfo.lng)},getNewListInfo:function(n,i){var o=this;this.$tool.uniRequest({url:"/api/index/page",params:{lat:String(n),lng:String(i)},success:function(t){o.cardList=t&&t.posiList?t.posiList:[],o.total=o.cardList.length},complete:function(){o.isPullDown=!1,t.stopPullDownRefresh()}})},getListInfo:function(n){var i=this;this.$tool.uniRequest({url:"/api/goods/lists",params:{page:this.page,search:"",coupon_id:this.coupon_id||"",category_id:this.coupon_id?"":n,lat:String(this.addressInfo.lat),lng:String(this.addressInfo.lng)},success:function(t){i.isPullDown&&(i.cardList=[]),i.cardList=i.cardList.concat(t.posiList),i.total=t.pages.total},complete:function(){i.isPullDown=!1,t.stopPullDownRefresh()}})},toPage:function(t){this.$tool.uniNavigateTo({url:"/pages/index/site-detail?id=".concat(t.goods_id)})}}};n.default=i}).call(this,i("543d")["default"])},faf3:function(t,n,i){"use strict";var o=i("82cf"),s=i.n(o);s.a}},[["7a37","common/runtime","common/vendor"]]]);