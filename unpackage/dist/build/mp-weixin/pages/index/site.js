(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/site"],{2055:function(t,i,n){"use strict";var o;n.d(i,"b",(function(){return s})),n.d(i,"c",(function(){return e})),n.d(i,"a",(function(){return o}));var s=function(){var t=this,i=t.$createElement,n=(t._self._c,t.__map(t.cardList,(function(i,n){var o=t.__get_orig(i),s=t.$tool.distanceHanlde(i.goods_distance);return{$orig:o,g0:s}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},e=[]},"546b":function(t,i,n){"use strict";n.r(i);var o=n("2055"),s=n("9981");for(var e in s)"default"!==e&&function(t){n.d(i,t,(function(){return s[t]}))}(e);n("732d");var a,u=n("f0c5"),l=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,"50b91b8a",null,!1,o["a"],a);i["default"]=l.exports},"732d":function(t,i,n){"use strict";var o=n("b0af"),s=n.n(o);s.a},9981:function(t,i,n){"use strict";n.r(i);var o=n("9c93"),s=n.n(o);for(var e in o)"default"!==e&&function(t){n.d(i,t,(function(){return o[t]}))}(e);i["default"]=s.a},"9c93":function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{page:1,total:0,category_id:1,cardList:[],isPullDown:!1,addressInfo:null,coupon_id:null}},onLoad:function(t){this.coupon_id=t.coupon_id||null,this.page=1,this.isPullDown=!0,this.init()},onPullDownRefresh:function(){this.page=1,this.isPullDown=!0,this.init()},onReachBottom:function(){console.log("触底了"),this.isPullDown=!1,this.total>this.cardList.length&&(this.page+=1,this.init())},methods:{init:function(){this.addressInfo=this.$tool.uniGetStorage("addressInfo"),this.addressInfo.category_id||this.coupon_id?this.getListInfo(this.addressInfo.category_id):this.getNewListInfo(this.addressInfo.lat,this.addressInfo.lng)},getNewListInfo:function(i,n){var o=this,s=this.$tool.uniGetStorage("site");if(s)return this.cardList=s&&s.posiList?s.posiList:[],this.total=this.cardList.length,this.isPullDown=!1,void t.stopPullDownRefresh();this.$tool.uniRequest({url:"/api/index/page",params:{lat:String(i),lng:String(n)},success:function(t){o.cardList=t&&t.posiList?t.posiList:[],o.total=o.cardList.length},complete:function(){o.isPullDown=!1,t.stopPullDownRefresh()}})},getListInfo:function(i){var n=this;this.$tool.uniRequest({url:"/api/goods/lists",params:{page:this.page,search:"",coupon_id:this.coupon_id||"",category_id:this.coupon_id?"":i,lat:String(this.addressInfo.lat),lng:String(this.addressInfo.lng)},success:function(t){n.isPullDown&&(n.cardList=[]),n.cardList=n.cardList.concat(t.posiList),n.total=t.pages.total},complete:function(){n.isPullDown=!1,t.stopPullDownRefresh()}})},toPage:function(t){this.$tool.uniNavigateTo({url:"/pages/index/site-detail?id=".concat(t.goods_id)})}}};i.default=n}).call(this,n("543d")["default"])},a49a:function(t,i,n){"use strict";(function(t){n("627e");o(n("66fd"));var i=o(n("546b"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("543d")["createPage"])},b0af:function(t,i,n){}},[["a49a","common/runtime","common/vendor"]]]);