(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/my-info"],{1598:function(e,t,n){},"2b11":function(e,t,n){"use strict";n.r(t);var o=n("ec5e"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"6f17":function(e,t,n){"use strict";var o=n("1598"),a=n.n(o);a.a},8115:function(e,t,n){"use strict";n.r(t);var o=n("d7a2"),a=n("2b11");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("6f17");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"4ca9362d",null,!1,o["a"],r);t["default"]=u.exports},d7a2:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=[]},ec5e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{userInfo:null,sexVal:null,phone:null}},onLoad:function(e){this.getMyInfo(),console.log(this.phone)},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")},phoneButton:function(){return 0==this.phone||""==this.phone},phoneInput:function(){return 0!=this.phone&&""!=this.phone}},methods:{bindDateChange:function(e){this.editUserInfo({birthday:e.target.value})},getPhoneNumber:function(e){if(!e.detail.iv)return this.$tool.uniShowToast({title:"获取失败！"}),!1;this.$tool.uniRequest({url:"",data:{iv:e.detail.iv,encrypted_data:e.detail.encryptedData},success:function(e){console.log(e)}}),this.phone="13649139296",this.userInfo.tel=this.phone,this.setPhone("tel",this.phone),console.log(e),console.log(e.detail.iv),console.log(e.detail.encryptedData)},setPhone:function(){var e=arguments.length>1?arguments[1]:void 0,t=this;this.$tool.uniRequest({url:"/api/user/edit",method:"POST",params:{avatarUrl:t.userInfo.avatarUrl,tel:"tel"===t.type?e:t.userInfo.tel,gender:t.userInfo.gender,birthday:t.userInfo.birthday},success:function(e){t.$tool.uniShowToast({title:"修改成功！"}),t.$tool.uniSetStorage("isEditUserInfo",!0)}})},sexValChange:function(e){this.sexVal!==e&&(this.sexVal=e,this.editUserInfo({}))},getDate:function(e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();return"start"===e?n-=60:"end"===e&&(n+=2),o=o>9?o:"0"+o,a=a>9?a:"0"+a,"".concat(n,"-").concat(o,"-").concat(a)},editPage:function(e,t){this.$tool.uniNavigateTo({url:"/pages/base/edit-my-info?value=".concat(e,"&type=").concat(t,"&userInfo=").concat(JSON.stringify(this.userInfo))})},base64PageImg:function(t){var n=e.getFileSystemManager().readFileSync(t,"base64");return"data:image/png;base64,"+n},changeAvatar:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],success:function(e){var n=e.tempFilePaths[0];t.editUserInfo({avatarUrl:t.base64PageImg(n)})}})},editUserInfo:function(e){var t=e.avatarUrl,n=e.birthday,o=this;this.$tool.uniRequest({url:"/api/user/edit",method:"POST",params:{avatarUrl:t||o.userInfo.avatarUrl,tel:o.userInfo.tel,nickName:o.userInfo.nickName,gender:String(o.sexVal),birthday:n||o.userInfo.birthday},success:function(e){o.$tool.uniSetStorage("isEditUserInfo",!0),o.getMyInfo()}})},getMyInfo:function(){var e=this;this.$tool.uniRequest({url:"/api/user.index/detail",success:function(t){e.userInfo=t.userInfo,e.sexVal="男"===t.userInfo.gender?1:2,e.userInfo.gender=e.sexVal,e.phone=t.userInfo.tel}})}}};t.default=n}).call(this,n("543d")["default"])},eecb:function(e,t,n){"use strict";(function(e){n("627e");o(n("66fd"));var t=o(n("8115"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["eecb","common/runtime","common/vendor"]]]);