(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/base/share"],{"26de":function(n,t,e){"use strict";var o=e("c0c9"),i=e.n(o);i.a},"2dd4":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(e("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function c(n,t,e,o,i,c,u){try{var a=n[c](u),r=a.value}catch(s){return void e(s)}a.done?t(r):Promise.resolve(r).then(o,i)}function u(n){return function(){var t=this,e=arguments;return new Promise((function(o,i){var u=n.apply(t,e);function a(n){c(u,o,i,a,r,"next",n)}function r(n){c(u,o,i,a,r,"throw",n)}a(void 0)}))}}var a={data:function(){return{width:null,height:null,bg:null,qr:null,bgPath:null,qrPath:null,num:null,imgUrl:null}},onLoad:function(){var t=this;n.getSystemInfo({success:function(n){t.width=n.screenWidth,t.height=n.windowHeight,t.num=n.pixelRatio}}),this.init().catch((function(n){console.log("init()",n)}))},methods:{init:function(){var n=this;return u(o.default.mark((function t(){var e,i,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n,i=n.$cache.get("_userId"),t.next=4,new Promise((function(n,t){e.$tool.uniRequest({url:"api/Codeok/",params:{uid:i,tid:"10014"},success:function(t){n(t)}})}));case 4:c=t.sent,n.qr=c.sharimg,n.bg=c.bjimg,n.downFilePath().catch((function(n){console.log("downFilePath()",n)}));case 8:case"end":return t.stop()}}),t)})))()},downFilePath:function(){var t=this;return u(o.default.mark((function e(){var i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,t.$tool.uniShowLoading({title:"加载中"}),e.next=4,new Promise((function(t,e){n.downloadFile({url:i.qr,success:function(n){i.qrPath=n.tempFilePath,t(n)},fail:function(n){e(n),console.log(n,"downqr")}})}));case 4:return e.sent,e.next=7,new Promise((function(t,e){n.downloadFile({url:i.bg,success:function(n){i.bgPath=n.tempFilePath,t(n)},fail:function(n){e(n),console.log(n,"getbg")}})}));case 7:e.sent,t.getImgInfo().catch((function(n){console.log("getImgInfo",n)}));case 9:case"end":return e.stop()}}),e)})))()},getImgInfo:function(){var t=this;return u(o.default.mark((function e(){var i,c,u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,new Promise((function(t,e){n.getImageInfo({src:i.qrPath,success:function(n){t(n)},fail:function(n){e(n)}})}));case 3:return c=e.sent,console.log(i.bgPath),e.next=7,new Promise((function(t,e){n.getImageInfo({src:i.bgPath,success:function(n){t(n)}})}));case 7:u=e.sent,t.create(u,c).catch((function(n){console.log("create",n)}));case 9:case"end":return e.stop()}}),e)})))()},create:function(t,e){var i=this;return u(o.default.mark((function c(){var u,a,r,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:u=i,a=n.createCanvasContext("shareImg"),r=i.width/2-e.width/2,s=i.height/2-e.height,console.log(r,s),a.drawImage(t.path,0,0,u.width,u.height),a.drawImage(e.path,r,s,100,100),a.draw(),setTimeout((function(){console.log("--createLoading"),u.$tool.uniHideLoading(),n.canvasToTempFilePath({canvasId:"shareImg",width:u.width,height:u.height,destWidth:u.width*u.num,destHeight:u.height*u.num,success:function(n){u.imgUrl=n.tempFilePath},fail:function(n){console.log(n)}})}),1e3);case 9:case"end":return o.stop()}}),c)})))()},saveImg:function(){}}};t.default=a}).call(this,e("543d")["default"])},8129:function(n,t,e){"use strict";e.r(t);var o=e("d1f8"),i=e("9de2");for(var c in i)"default"!==c&&function(n){e.d(t,n,(function(){return i[n]}))}(c);e("26de");var u,a=e("f0c5"),r=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"66b956cc",null,!1,o["a"],u);t["default"]=r.exports},"9de2":function(n,t,e){"use strict";e.r(t);var o=e("2dd4"),i=e.n(o);for(var c in o)"default"!==c&&function(n){e.d(t,n,(function(){return o[n]}))}(c);t["default"]=i.a},c0c9:function(n,t,e){},d1f8:function(n,t,e){"use strict";var o;e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return c})),e.d(t,"a",(function(){return o}));var i=function(){var n=this,t=n.$createElement;n._self._c},c=[]},eff6:function(n,t,e){"use strict";(function(n){e("627e");o(e("66fd"));var t=o(e("8129"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])}},[["eff6","common/runtime","common/vendor"]]]);